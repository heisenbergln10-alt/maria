<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maria — Celestial Symphony</title>
    <meta name="description" content="An immersive digital experience crafted for Maria">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>⭐</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,200..900;1,6..96,200..900&family=Crimson+Pro:ital,wght@0,200..900;1,200..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --base-light: #faf8f6;
            --base-dark: #f5f1ed;
            --text-primary: #0a0a0a;
            --text-secondary: rgba(10, 10, 10, 0.7);
            --accent-gold: #c9a961;
            --accent-gold-dark: #a88545;
            --gray-muted: #e3ddd7;
            --charcoal: #2a2928;
            
            --font-display: 'Bodoni Moda', serif;
            --font-body: 'Crimson Pro', serif;
            --font-mono: 'JetBrains Mono', monospace;
            
            --fs-hero: clamp(3rem, 8vw, 6rem);
            --fs-title: clamp(2rem, 5vw, 3.5rem);
            --fs-heading: clamp(1.5rem, 3vw, 2.5rem);
            --fs-body: clamp(1rem, 2vw, 1.25rem);
            --fs-small: clamp(0.875rem, 1.5vw, 1rem);
            
            --space-xs: clamp(0.5rem, 1vw, 1rem);
            --space-sm: clamp(1rem, 2vw, 1.5rem);
            --space-md: clamp(2rem, 4vw, 3rem);
            --space-lg: clamp(3rem, 6vw, 5rem);
            --space-xl: clamp(4rem, 8vw, 8rem);
            
            --blur-subtle: 10px;
            --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.1);
            --shadow-glow: 0 0 30px rgba(201, 169, 97, 0.3);
            
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-spring: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --base-light: #1a1918;
                --base-dark: #0f0e0e;
                --text-primary: #faf8f6;
                --text-secondary: rgba(250, 248, 246, 0.7);
                --gray-muted: #3a3836;
            }
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            font-family: var(--font-body);
            font-weight: 400;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(180deg, var(--base-light) 0%, var(--base-dark) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-muted);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-gold);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-gold-dark);
        }

        ::selection {
            background: var(--accent-gold);
            color: var(--base-light);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-display);
            font-weight: 300;
            line-height: 1.2;
            letter-spacing: -0.02em;
        }

        h1 { font-size: var(--fs-hero); }
        h2 { font-size: var(--fs-title); }
        h3 { font-size: var(--fs-heading); }

        p {
            font-size: var(--fs-body);
            margin-bottom: var(--space-sm);
        }

        .mono {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            letter-spacing: 0.05em;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-md) 0;
        }

        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(var(--blur-subtle));
            -webkit-backdrop-filter: blur(var(--blur-subtle));
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-soft);
        }

        .hidden {
            display: none;
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.03;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='1'/%3E%3C/svg%3E");
        }

        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent-gold);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.15s ease-out;
            mix-blend-mode: difference;
        }

        .cursor-dot {
            width: 4px;
            height: 4px;
            background: var(--accent-gold);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
        }

        header {
            height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        #cosmic-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: var(--space-md);
        }

        .hero-title {
            font-weight: 200;
            margin-bottom: var(--space-md);
            opacity: 0;
            animation: fadeInUp 1.5s ease-out forwards;
        }

        .hero-quote {
            font-size: var(--fs-heading);
            font-style: italic;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            opacity: 0;
            animation: fadeInUp 1.5s ease-out 0.5s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(30px);
            }
        }

        nav {
            position: fixed;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            z-index: 100;
        }

        .nav-orbs {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: relative;
        }

        .nav-orb {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-gold);
            cursor: pointer;
            position: relative;
            transition: var(--transition-spring);
        }

        .nav-orb::before {
            content: attr(data-label);
            position: absolute;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--charcoal);
            color: var(--base-light);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition-smooth);
        }

        .nav-orb:hover {
            transform: scale(2);
            box-shadow: var(--shadow-glow);
        }

        .nav-orb:hover::before {
            opacity: 1;
            right: 2.5rem;
        }

        .nav-lines {
            position: absolute;
            top: 0;
            left: 50%;
            width: 1px;
            height: 100%;
            background: linear-gradient(to bottom, transparent, var(--accent-gold), transparent);
            opacity: 0.3;
            transform: translateX(-50%);
        }

        section {
            min-height: 100vh;
            padding: var(--space-xl) 0;
            position: relative;
            border-bottom: 1px solid rgba(201, 169, 97, 0.1);
        }

        section:last-of-type {
            border-bottom: none;
        }

        .section-title {
            text-align: center;
            margin-bottom: var(--space-lg);
            font-weight: 300;
        }

        #constellations {
            background: radial-gradient(ellipse at center, rgba(42, 41, 40, 0.1) 0%, transparent 70%);
        }

        #constellation-canvas {
            width: 100%;
            height: 600px;
            border-radius: 20px;
            cursor: crosshair;
            position: relative;
        }

        .constellation-info {
            text-align: center;
            margin-top: var(--space-md);
            padding: 1rem 2rem;
            border-radius: 10px;
            font-family: var(--font-mono);
            transition: var(--transition-smooth);
        }

        /* Music Player Styles */
        .music-interface {
            max-width: 900px;
            margin: 0 auto;
        }

        .music-player {
            padding: var(--space-lg);
            border-radius: 30px;
            background: linear-gradient(135deg, rgba(42, 41, 40, 0.2) 0%, rgba(201, 169, 97, 0.1) 100%);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .player-main {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--space-lg);
            margin-bottom: var(--space-md);
            align-items: center;
        }

        .album-artwork {
            width: 300px;
            height: 300px;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .album-art-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .album-art-img.playing {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .vinyl-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, #1a1a1a 30%, #0a0a0a 100%);
        }

        .vinyl-record {
            width: 280px;
            height: 280px;
            border-radius: 50%;
            background: 
                radial-gradient(circle at center, #2a2a2a 0%, #1a1a1a 20%, transparent 20%),
                radial-gradient(circle at center, transparent 20%, #0a0a0a 20%, #0a0a0a 40%, transparent 40%),
                radial-gradient(circle at center, transparent 40%, #1a1a1a 40%, #1a1a1a 60%, transparent 60%),
                radial-gradient(circle at center, transparent 60%, #0a0a0a 60%, #0a0a0a 80%, transparent 80%),
                radial-gradient(circle at center, transparent 80%, #1a1a1a 80%, #1a1a1a 100%);
            position: relative;
            animation: spin 10s linear infinite paused;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .vinyl-record.playing {
            animation-play-state: running;
        }

        .vinyl-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-gold-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .label-text {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--base-light);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .track-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .now-playing {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--accent-gold);
            text-transform: uppercase;
            letter-spacing: 0.2em;
        }

        .track-title {
            font-family: var(--font-display);
            font-size: var(--fs-heading);
            font-weight: 300;
            margin: 0;
        }

        .track-artist {
            font-size: var(--fs-body);
            color: var(--text-secondary);
            margin: 0;
        }

        .track-year {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .waveform-visualizer {
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 40px;
            margin-top: var(--space-sm);
        }

        .wave-bar {
            flex: 1;
            background: var(--accent-gold);
            opacity: 0.6;
            border-radius: 2px;
            transition: height 0.3s ease;
            animation: wave 1.5s ease-in-out infinite;
        }

        .wave-bar:nth-child(odd) {
            animation-delay: 0.1s;
        }

        .wave-bar:nth-child(even) {
            animation-delay: 0.2s;
        }

        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 100%; }
        }

        .progress-section {
            margin-bottom: var(--space-md);
        }

        .time-display {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--text-secondary);
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            position: relative;
            cursor: pointer;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold) 0%, var(--accent-gold-dark) 100%);
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-handle {
            position: absolute;
            top: 50%;
            right: -8px;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background: var(--accent-gold);
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            cursor: grab;
        }

        .controls-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .control-btn {
            background: transparent;
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            font-size: 1.2rem;
        }

        .control-btn:hover {
            background: var(--accent-gold);
            color: var(--base-light);
            transform: scale(1.1);
        }

        .play-btn {
            width: 70px;
            height: 70px;
            font-size: 1.5rem;
        }

        .playlist-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: var(--space-md);
            max-height: 400px;
            overflow-y: auto;
        }

        .playlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid rgba(201, 169, 97, 0.2);
        }

        .playlist-header h4 {
            font-family: var(--font-display);
            font-size: var(--fs-body);
            font-weight: 300;
            margin: 0;
        }

        .track-count {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--text-secondary);
        }

        .playlist-items {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .playlist-item {
            display: grid;
            grid-template-columns: 30px 1fr auto;
            gap: var(--space-sm);
            padding: var(--space-sm);
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .playlist-item:hover {
            background: rgba(201, 169, 97, 0.1);
        }

        .playlist-item.active {
            background: rgba(201, 169, 97, 0.2);
            border-left: 3px solid var(--accent-gold);
        }

        .playlist-number {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--text-secondary);
            text-align: center;
        }

        .playlist-track-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            min-width: 0;
        }

        .playlist-track-title {
            font-size: var(--fs-small);
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playlist-track-artist {
            font-size: 0.875rem;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playlist-track-duration {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--text-secondary);
        }

        .audio-source-note {
            text-align: center;
            margin-top: var(--space-md);
            color: var(--text-secondary);
        }

        .spotify-embed-container {
            margin-top: var(--space-md);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        #chamber {
            background: linear-gradient(135deg, rgba(201, 169, 97, 0.05) 0%, transparent 50%);
        }

        .essay-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-md);
            perspective: 1000px;
        }

        .essay-card {
            background: var(--base-light);
            border-radius: 15px;
            padding: var(--space-md);
            cursor: pointer;
            transform-style: preserve-3d;
            transition: var(--transition-spring);
            position: relative;
            overflow: hidden;
        }

        .essay-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(201, 169, 97, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .essay-card:hover::before {
            transform: translateX(100%);
        }

        .essay-card:hover {
            transform: rotateY(5deg) rotateX(-5deg) translateZ(20px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .essay-title {
            font-size: var(--fs-heading);
            margin-bottom: var(--space-sm);
            color: var(--accent-gold-dark);
        }

        .essay-excerpt {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .essay-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition-smooth);
        }

        .essay-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .essay-content {
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            padding: var(--space-lg);
            background: var(--base-light);
            border-radius: 20px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border: none;
            background: var(--accent-gold);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--base-light);
            transition: var(--transition-smooth);
        }

        .close-modal:hover {
            transform: rotate(90deg);
            background: var(--accent-gold-dark);
        }

        #paradox {
            background: linear-gradient(135deg, rgba(42, 41, 40, 0.1) 0%, transparent 50%, rgba(42, 41, 40, 0.1) 100%);
        }

        .paradox-interface {
            max-width: 900px;
            margin: 0 auto;
            padding: var(--space-lg);
            border-radius: 20px;
        }

        .paradox-controls {
            display: grid;
            gap: var(--space-md);
            margin-bottom: var(--space-md);
        }

        .paradox-mode-selector {
            display: flex;
            justify-content: center;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: 1px solid rgba(201, 169, 97, 0.5);
            color: var(--text-secondary);
            border-radius: 25px;
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .mode-btn:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
            background: rgba(201, 169, 97, 0.1);
        }

        .mode-btn.active {
            background: var(--accent-gold);
            color: var(--base-light);
            border-color: var(--accent-gold);
        }

        .paradox-concepts {
            text-align: center;
        }

        .concepts-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: var(--space-xs);
            margin-top: var(--space-xs);
            min-height: 40px;
        }

        .concept-tag {
            padding: 0.5rem 1rem;
            background: rgba(201, 169, 97, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            border-radius: 20px;
            font-size: var(--fs-small);
            font-family: var(--font-mono);
            position: relative;
            overflow: hidden;
        }

        .paradox-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin: 0 auto;
            padding: 1rem 3rem;
            background: transparent;
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
            font-family: var(--font-display);
            font-size: var(--fs-body);
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .paradox-button:hover {
            background: var(--accent-gold);
            color: var(--base-light);
            transform: scale(1.05);
        }

        .paradox-icon {
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .paradox-output {
            margin-top: var(--space-lg);
            padding: var(--space-lg);
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(201, 169, 97, 0.3);
            border-radius: 20px;
        }

        .paradox-title {
            font-family: var(--font-display);
            font-size: var(--fs-heading);
            color: var(--accent-gold);
            text-align: center;
            margin-bottom: var(--space-md);
        }

        .paradox-content {
            font-size: var(--fs-body);
            line-height: 1.8;
            margin-bottom: var(--space-md);
        }

        .paradox-questions {
            padding: var(--space-md);
            background: rgba(201, 169, 97, 0.1);
            border-radius: 15px;
        }

        .paradox-questions h4 {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--accent-gold);
            margin-bottom: var(--space-sm);
        }

        .paradox-questions ul {
            list-style: none;
        }

        .paradox-questions li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            font-style: italic;
            color: var(--text-secondary);
        }

        .paradox-questions li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--accent-gold);
        }

        #wisdom {
            background: linear-gradient(135deg, rgba(42, 41, 40, 0.1) 0%, transparent 50%, rgba(42, 41, 40, 0.1) 100%);
        }

        #poems {
            background: linear-gradient(to bottom, rgba(227, 221, 215, 0.2) 0%, transparent 100%);
        }

        .poem-interface {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .poem-display {
            padding: var(--space-lg);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: var(--space-md);
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .poem-content {
            font-size: var(--fs-body);
            line-height: 2;
            white-space: pre-line;
            color: var(--text-primary);
            max-width: 800px;
            margin: 0 auto;
            transition: opacity 0.5s ease;
        }

        .poem-btn {
            padding: 1rem 2rem;
            background: transparent;
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
            font-family: var(--font-display);
            font-size: var(--fs-body);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .poem-btn:hover {
            background: var(--accent-gold);
            color: var(--base-light);
        }

        #facts {
            background: radial-gradient(circle at bottom, rgba(201, 169, 97, 0.1) 0%, transparent 50%);
        }

        .facts-interface {
            max-width: 800px;
            margin: 0 auto;
        }

        .fact-card {
            padding: var(--space-lg);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: var(--space-md);
            text-align: center;
        }

        .fact-text {
            font-size: var(--fs-heading);
            line-height: 1.8;
            color: var(--text-primary);
            margin-bottom: var(--space-md);
        }

        .fact-category {
            font-family: var(--font-mono);
            font-size: var(--fs-small);
            color: var(--accent-gold);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .fact-btn {
            padding: 1rem 3rem;
            background: linear-gradient(45deg, var(--accent-gold), var(--accent-gold-dark));
            border: none;
            color: var(--base-light);
            font-family: var(--font-display);
            font-size: var(--fs-body);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .fact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(201, 169, 97, 0.3);
        }

        footer {
            min-height: 30vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: var(--charcoal);
            color: var(--base-light);
            overflow: hidden;
        }

        .footer-content {
            text-align: center;
        }

        .footer-content p {
            color: var(--accent-gold);
        }

        .particle {
            position: fixed;
            pointer-events: none;
            opacity: 0.5;
            animation: floatParticle 20s infinite;
        }

        @keyframes floatParticle {
            0%, 100% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.5;
            }
            90% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100vh) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }

        .loading {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(201, 169, 97, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-gold);
            animation: spin 1s linear infinite;
        }

        @media (max-width: 768px) {
            nav {
                display: none;
            }

            .essay-container {
                grid-template-columns: 1fr;
            }

            .player-main {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .album-artwork {
                margin: 0 auto;
            }

            .track-info {
                align-items: center;
            }

            .waveform-visualizer {
                justify-content: center;
                max-width: 300px;
                margin: var(--space-md) auto;
            }

            .controls-section {
                gap: var(--space-sm);
            }

            .control-btn {
                padding: 0.3rem;
            }

            .playlist-section {
                max-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="grain" aria-hidden="true"></div>
    <div class="cursor" aria-hidden="true"></div>
    <div class="cursor-dot" aria-hidden="true"></div>

    <header>
        <canvas id="cosmic-canvas"></canvas>
        <div class="hero-content">
            <h1 class="hero-title">Maria</h1>
            <p class="hero-quote">"We are made of star stuff, contemplating the stars"</p>
        </div>
    </header>

    <nav>
        <div class="nav-orbs">
            <div class="nav-lines"></div>
            <a href="#constellations" class="nav-orb" data-label="Stars"></a>
            <a href="#chamber" class="nav-orb" data-label="Chamber"></a>
            <a href="#music" class="nav-orb" data-label="Music"></a>
            <a href="#paradox" class="nav-orb" data-label="Paradox"></a>
            <a href="#poems" class="nav-orb" data-label="Poetry"></a>
            <a href="#facts" class="nav-orb" data-label="Universe"></a>
        </div>
    </nav>

    <main>
        <section id="constellations" class="fade-in">
            <div class="container">
                <h2 class="section-title">Star Puzzle</h2>
                <p class="mono" style="text-align: center; margin-bottom: var(--space-md);">Connect the stars to reveal a hidden message</p>
                <canvas id="constellation-canvas" class="glass"></canvas>
                <div class="constellation-info glass" id="constellation-info">
                    <p>Find the pattern in the stars...</p>
                </div>
            </div>
        </section>

        <section id="chamber" class="fade-in">
            <div class="container">
                <h2 class="section-title">Chamber of Echoes</h2>
                <div class="essay-container">
                    <article class="essay-card glass">
                        <h3 class="essay-title">On Consciousness</h3>
                        <p class="essay-excerpt">The mirror of awareness reflects not just the world, but the very act of reflection itself...</p>
                    </article>
                    <article class="essay-card glass">
                        <h3 class="essay-title">The Nature of Time</h3>
                        <p class="essay-excerpt">Time flows not as a river, but as an ocean—vast, deep, and full of currents we barely perceive...</p>
                    </article>
                    <article class="essay-card glass">
                        <h3 class="essay-title">Beauty's Whisper</h3>
                        <p class="essay-excerpt">In the fleeting moment of aesthetic arrest, we touch something eternal, something that was always there...</p>
                    </article>
                    <article class="essay-card glass">
                        <h3 class="essay-title">The Gift of Suffering</h3>
                        <p class="essay-excerpt">Pain carves the vessel in which joy is held. Without darkness, light has no meaning...</p>
                    </article>
                    <article class="essay-card glass">
                        <h3 class="essay-title">Love as Verb</h3>
                        <p class="essay-excerpt">Love is not found but forged, not felt but enacted, a daily choice to see the sacred in another...</p>
                    </article>
                    <article class="essay-card glass">
                        <h3 class="essay-title">Dancing with Death</h3>
                        <p class="essay-excerpt">Mortality is the dark backdrop against which life's colors shine most brilliantly...</p>
                    </article>
                </div>
            </div>
        </section>

        <div class="essay-modal">
            <div class="essay-content glass">
                <button class="close-modal">&times;</button>
                <h3 id="modal-title" class="essay-title"></h3>
                <div class="modal-body"></div>
            </div>
        </div>

        <section id="music" class="fade-in">
            <div class="container">
                <h2 class="section-title">Musical Journey</h2>
                <p class="mono" style="text-align: center; margin-bottom: var(--space-md);">Egyptian classics & timeless melodies</p>
                
                <div class="music-interface">
                    <div class="music-player glass">
                        <div class="player-main">
                            <div class="album-artwork">
                                <img src="https://i.scdn.co/image/ab67616d0000b273e7e2e5e8dc432b018f7e5e15" alt="Egyptian Classics" class="album-art-img" id="album-art">
                            </div>
                            
                            <div class="track-info">
                                <div class="now-playing">NOW PLAYING</div>
                                <h3 class="track-title" id="track-title">Click Play to Start</h3>
                                <p class="track-artist" id="track-artist">Egyptian Classics</p>
                                <div class="track-year" id="track-year">Timeless</div>
                                
                                <div class="waveform-visualizer" id="waveform">
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="controls-section">
                            <audio id="audio-player" style="width: 100%; margin-top: 20px;" controls>
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        
                        <div class="playlist-section">
                            <div class="playlist-header">
                                <h4>Egyptian Classics</h4>
                                <span class="track-count">10 masterpieces</span>
                            </div>
                            <div class="playlist-items" id="playlist-items">
                                <!-- Actual Egyptian classics with correct Spotify links -->
                                <div class="playlist-item active" data-url="https://open.spotify.com/track/3gFcGnU4kTdMYLXDjH1TK8" data-artist="Umm Kulthum" data-title="Enta Omri" data-img="https://i.scdn.co/image/ab67616d0000b273e7e2e5e8dc432b018f7e5e15">
                                    <div class="playlist-number">1</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Enta Omri</div>
                                        <div class="playlist-track-artist">Umm Kulthum</div>
                                    </div>
                                    <div class="playlist-track-duration">38:31</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/7ouRfMhJnMA3a88VBzByxW" data-artist="Umm Kulthum" data-title="Alf Leila wa Leila" data-img="https://i.scdn.co/image/ab67616d0000b273c6f3fb870e171c5b9d9e8e96">
                                    <div class="playlist-number">2</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Alf Leila wa Leila</div>
                                        <div class="playlist-track-artist">Umm Kulthum</div>
                                    </div>
                                    <div class="playlist-track-duration">54:01</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/2pUlwzbxGGZoXBxLZiL8XP" data-artist="Abdel Halim Hafez" data-title="Ahwak" data-img="https://i.scdn.co/image/ab67616d0000b2739c8ed56c439a8157a682c390">
                                    <div class="playlist-number">3</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Ahwak</div>
                                        <div class="playlist-track-artist">Abdel Halim Hafez</div>
                                    </div>
                                    <div class="playlist-track-duration">4:12</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/6dwvEqcqiMlOUqEgtZq5oR" data-artist="Abdel Halim Hafez" data-title="Gana El Hawa" data-img="https://i.scdn.co/image/ab67616d0000b273fa8a33d60c0bc893a03fd0ec">
                                    <div class="playlist-number">4</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Gana El Hawa</div>
                                        <div class="playlist-track-artist">Abdel Halim Hafez</div>
                                    </div>
                                    <div class="playlist-track-duration">6:18</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/0MnG7RgYTmYhPGDbFQasz0" data-artist="Fairuz" data-title="Nassam Alayna El Hawa" data-img="https://i.scdn.co/image/ab67616d0000b2731c8f054879c69de1c26e4e00">
                                    <div class="playlist-number">5</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Nassam Alayna El Hawa</div>
                                        <div class="playlist-track-artist">Fairuz</div>
                                    </div>
                                    <div class="playlist-track-duration">3:47</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/7mJszBFgMOIoD72QmVgpxC" data-artist="Mohamed Abdel Wahab" data-title="Ya Msafer" data-img="https://i.scdn.co/image/ab67616d0000b273d9d01c1c1e0b0e66c2a1c7f0">
                                    <div class="playlist-number">6</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Ya Msafer</div>
                                        <div class="playlist-track-artist">Mohamed Abdel Wahab</div>
                                    </div>
                                    <div class="playlist-track-duration">5:03</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/6kBG7OOWkbNm0nYQqdHOqL" data-artist="Warda" data-title="Batwanes Beek" data-img="https://i.scdn.co/image/ab67616d0000b273f4a2ccbe20e44e03b983a5fa">
                                    <div class="playlist-number">7</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Batwanes Beek</div>
                                        <div class="playlist-track-artist">Warda</div>
                                    </div>
                                    <div class="playlist-track-duration">10:23</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/1yBvomPMq8SJzV6tBhZCCB" data-artist="Najat Al Saghira" data-title="Ayoun El Alb" data-img="https://i.scdn.co/image/ab67616d0000b273695175bf0a8c8aba95f6ad93">
                                    <div class="playlist-number">8</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Ayoun El Alb</div>
                                        <div class="playlist-track-artist">Najat Al Saghira</div>
                                    </div>
                                    <div class="playlist-track-duration">5:58</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/67OWUJEyH08sNlEG7UQzjz" data-artist="Farid Al Atrash" data-title="Ya Zahratan Fi Khayali" data-img="https://i.scdn.co/image/ab67616d0000b273e0fb1ae75c78ba91c6c2f973">
                                    <div class="playlist-number">9</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Ya Zahratan Fi Khayali</div>
                                        <div class="playlist-track-artist">Farid Al Atrash</div>
                                    </div>
                                    <div class="playlist-track-duration">4:37</div>
                                </div>
                                <div class="playlist-item" data-url="https://open.spotify.com/track/4vCkQHhNGuyiCMWxNBQ0cP" data-artist="Asmahan" data-title="Ya Habibi Taala" data-img="https://i.scdn.co/image/ab67616d0000b273cfdf93308e977f2e088ad8d9">
                                    <div class="playlist-number">10</div>
                                    <div class="playlist-track-info">
                                        <div class="playlist-track-title">Ya Habibi Taala</div>
                                        <div class="playlist-track-artist">Asmahan</div>
                                    </div>
                                    <div class="playlist-track-duration">3:12</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="audio-source-note">
                            <p class="mono">♪ Timeless Egyptian Masterpieces ♪</p>
                            <p style="font-size: 0.875rem; margin-top: 1rem;">Click on any song above to copy its Spotify link</p>
                            <div class="spotify-embed-container">
                                <iframe id="spotify-embed" style="border-radius:12px; display:none;" 
                                    src="" 
                                    width="100%" height="152" frameBorder="0" 
                                    allowfullscreen="" 
                                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                                    loading="lazy">
                                </iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="paradox" class="fade-in">
            <div class="container">
                <h2 class="section-title">The Paradox Engine</h2>
                <p class="mono" style="text-align: center; margin-bottom: var(--space-md);">Generate philosophical thought experiments</p>
                
                <div class="paradox-interface glass">
                    <div class="paradox-controls">
                        <div class="paradox-mode-selector">
                            <button class="mode-btn active" data-mode="paradox">Paradox</button>
                            <button class="mode-btn" data-mode="dilemma">Ethical Dilemma</button>
                            <button class="mode-btn" data-mode="thought">Thought Experiment</button>
                            <button class="mode-btn" data-mode="dialogue">Socratic Dialogue</button>
                        </div>
                        
                        <div class="paradox-concepts">
                            <p class="mono">Active Concepts:</p>
                            <div id="paradox-concepts-list" class="concepts-display"></div>
                        </div>
                    </div>
                    
                    <button id="generate-paradox" class="paradox-button">
                        <span class="paradox-icon">∞</span>
                        <span>Generate</span>
                        <span class="paradox-icon">∞</span>
                    </button>
                    
                    <div id="paradox-output" class="paradox-output hidden">
                        <div class="paradox-title"></div>
                        <div class="paradox-content"></div>
                        <div class="paradox-questions"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="poems" class="fade-in">
            <div class="container">
                <h2 class="section-title">Poetry for Maria</h2>
                <p class="mono" style="text-align: center; margin-bottom: var(--space-md);">Verses from the heart</p>
                
                <div class="poem-interface">
                    <div class="poem-display glass">
                        <div class="poem-content" id="poem-content" style="font-size: 1.5rem; line-height: 2.5; direction: rtl; font-family: 'Amiri', serif; text-align: right; max-width: 800px;">اضغطي لتقرئي أبياتاً جديدة...</div>
                    </div>
                    <button class="poem-btn" id="generate-poem">أبيات جديدة</button>
                </div>
            </div>
        </section>

        <section id="facts" class="fade-in">
            <div class="container">
                <h2 class="section-title">Universe Facts</h2>
                <p class="mono" style="text-align: center; margin-bottom: var(--space-md);">Fascinating truths about our cosmos</p>
                
                <div class="facts-interface">
                    <div class="fact-card glass">
                        <p class="fact-text" id="fact-text">The universe is full of wonders...</p>
                        <p class="fact-category" id="fact-category">ASTRONOMY</p>
                    </div>
                    <button class="fact-btn" id="get-fact">Discover More</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <p class="mono">Created with love for Maria</p>
        </div>
    </footer>

    <script type="importmap">
    {
      "imports": {
        "@google/generative-ai": "https://esm.run/@google/generative-ai"
      }
    }
    </script>
    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";
        const genAI = new GoogleGenerativeAI('AIzaSyAqXYggfgLt5_dL6wLEkNZUnGXr5QHBch4');
        window.genAI = genAI;
    </script>
    <script>
        const state = {
            mouseX: 0,
            mouseY: 0,
            connections: [],
            solved: false,
            currentTrack: 0,
            isPlaying: false
        };

        document.addEventListener('DOMContentLoaded', () => {
            initCustomCursor();
            initCosmicCanvas();
            initIntersectionObserver();
            initStarPuzzle();
            initEssayCards();
            initParadoxEngine();
            initPoetry();
            initFacts();
            initFloatingParticles();
            initMusicPlayer();
        });

        function initCustomCursor() {
            const cursor = document.querySelector('.cursor');
            const cursorDot = document.querySelector('.cursor-dot');
            
            document.addEventListener('mousemove', (e) => {
                state.mouseX = e.clientX;
                state.mouseY = e.clientY;
                cursor.style.left = e.clientX - 10 + 'px';
                cursor.style.top = e.clientY - 10 + 'px';
                cursorDot.style.left = e.clientX - 2 + 'px';
                cursorDot.style.top = e.clientY - 2 + 'px';
            });
        }

        function initCosmicCanvas() {
            const canvas = document.getElementById('cosmic-canvas');
            const ctx = canvas.getContext('2d');
            let bgStars = [];

            function resize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                initBackgroundStars();
            }

            function initBackgroundStars() {
                bgStars = [];
                for (let i = 0; i < 200; i++) {
                    bgStars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 2,
                        opacity: Math.random()
                    });
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                bgStars.forEach(star => {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(201, 169, 97, ${star.opacity})`;
                    ctx.fill();
                    
                    star.y += 0.5;
                    if (star.y > canvas.height) star.y = 0;
                });
                
                requestAnimationFrame(animate);
            }

            window.addEventListener('resize', resize);
            resize();
            animate();
        }

        function initIntersectionObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
        }

        function initMusicPlayer() {
            const audioPlayer = document.getElementById('audio-player');
            const albumArt = document.getElementById('album-art');
            const spotifyEmbed = document.getElementById('spotify-embed');
            
            // Handle playlist item clicks
            document.querySelectorAll('.playlist-item').forEach((item, index) => {
              item.addEventListener('click', () => {
                // visual selection
                document.querySelectorAll('.playlist-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            
                // update text + artwork
                document.getElementById('track-title').textContent  = item.dataset.title;
                document.getElementById('track-artist').textContent = item.dataset.artist;
                if (item.dataset.img) albumArt.src = item.dataset.img;
            
                // build and show Spotify embed – autoplay
                const trackId   = item.dataset.url.split('/track/')[1].split('?')[0];
                spotifyEmbed.src = `https://open.spotify.com/embed/track/${trackId}?utm_source=generator&theme=0&autoplay=1`;
                spotifyEmbed.style.display = 'block';
            
                // housekeeping / animation
                state.currentTrack = index;
                animateWaveform(true);
                albumArt.classList.add('playing');
              });
            });

            
            // Auto-load first track
            const firstTrack = document.querySelector('.playlist-item');
            if (firstTrack) {
                firstTrack.click();
            }
        }
        
        function animateWaveform(playing) {
            const bars = document.querySelectorAll('.wave-bar');
            bars.forEach(bar => {
                if (playing) {
                    bar.style.animationPlayState = 'running';
                } else {
                    bar.style.animationPlayState = 'paused';
                }
            });
        }

        function initFacts() {
            const btn = document.getElementById('get-fact');
            const factText = document.getElementById('fact-text');
            const category = document.getElementById('fact-category');

            const facts = [
                { text: "The universe is approximately 13.8 billion years old", category: "COSMOLOGY" },
                { text: "There are more stars in the universe than grains of sand on all of Earth's beaches", category: "ASTRONOMY" },
                { text: "A day on Venus is longer than its year", category: "PLANETARY SCIENCE" },
                { text: "The human brain uses 20% of the body's total energy", category: "BIOLOGY" },
                { text: "Octopuses have three hearts and blue blood", category: "MARINE BIOLOGY" },
                { text: "The Great Wall of China isn't visible from space without aid", category: "MYTHS & FACTS" },
                { text: "Honey never spoils - archaeologists have found 3000-year-old honey that's still edible", category: "NATURE" },
                { text: "A single bolt of lightning contains enough energy to toast 100,000 slices of bread", category: "PHYSICS" },
                { text: "The human eye can distinguish about 10 million different colors", category: "HUMAN PERCEPTION" },
                { text: "Time passes faster for your face than your feet due to gravitational time dilation", category: "RELATIVITY" }
            ];

            btn.addEventListener('click', () => {
                const fact = facts[Math.floor(Math.random() * facts.length)];
                factText.style.opacity = '0';
                setTimeout(() => {
                    factText.textContent = fact.text;
                    category.textContent = fact.category;
                    factText.style.opacity = '1';
                }, 300);
            });
        }

        function initStarPuzzle() {
            const canvas = document.getElementById('constellation-canvas');
            const ctx = canvas.getContext('2d');
            const info = document.getElementById('constellation-info');
            
            let isDragging = false;
            let dragStart = null;
            let hoveredConcept = null;
            
            const philosophicalConcepts = [
                { id: 1, x: 0.2, y: 0.3, label: "Being", connections: [2, 5] },
                { id: 2, x: 0.8, y: 0.2, label: "Time", connections: [1, 3] },
                { id: 3, x: 0.7, y: 0.7, label: "Consciousness", connections: [2, 4] },
                { id: 4, x: 0.3, y: 0.8, label: "Freedom", connections: [3, 5] },
                { id: 5, x: 0.5, y: 0.5, label: "Truth", connections: [1, 4] },
                { id: 6, x: 0.1, y: 0.6, label: "Beauty", connections: [7] },
                { id: 7, x: 0.9, y: 0.4, label: "Death", connections: [6, 8] },
                { id: 8, x: 0.4, y: 0.1, label: "Love", connections: [7, 9] },
                { id: 9, x: 0.6, y: 0.9, label: "Suffering", connections: [8, 10] },
                { id: 10, x: 0.5, y: 0.3, label: "Transcendence", connections: [9] }
            ];

            function resize() {
                canvas.width = canvas.offsetWidth;
                canvas.height = 600;
                draw();
            }

            function getConceptPosition(concept) {
                return {
                    x: concept.x * canvas.width,
                    y: concept.y * canvas.height
                };
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const gradient = ctx.createRadialGradient(
                    canvas.width / 2, canvas.height / 2, 0,
                    canvas.width / 2, canvas.height / 2, canvas.width / 2
                );
                gradient.addColorStop(0, 'rgba(201, 169, 97, 0.05)');
                gradient.addColorStop(0.5, 'rgba(42, 41, 40, 0.1)');
                gradient.addColorStop(1, 'rgba(0, 0, 0, 0.2)');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                state.connections.forEach(conn => {
                    const start = getConceptPosition(conn.from);
                    const end = getConceptPosition(conn.to);
                    
                    ctx.beginPath();
                    ctx.moveTo(start.x, start.y);
                    ctx.lineTo(end.x, end.y);
                    ctx.strokeStyle = 'rgba(201, 169, 97, 0.5)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                });

                if (isDragging && dragStart) {
                    const start = getConceptPosition(dragStart);
                    ctx.beginPath();
                    ctx.moveTo(start.x, start.y);
                    ctx.lineTo(state.mouseX - canvas.getBoundingClientRect().left, 
                              state.mouseY - canvas.getBoundingClientRect().top);
                    ctx.strokeStyle = 'rgba(201, 169, 97, 0.3)';
                    ctx.lineWidth = 2;
                    ctx.setLineDash([5, 5]);
                    ctx.stroke();
                    ctx.setLineDash([]);
                }

                philosophicalConcepts.forEach(concept => {
                    const pos = getConceptPosition(concept);
                    const isHovered = hoveredConcept === concept;
                    
                    if (isHovered) {
                        ctx.shadowBlur = 20;
                        ctx.shadowColor = 'rgba(201, 169, 97, 0.8)';
                    }

                    ctx.beginPath();
                    for (let i = 0; i < 5; i++) {
                        const angle = (i * 2 * Math.PI / 5) - Math.PI / 2;
                        const innerAngle = angle + Math.PI / 5;
                        const outerRadius = isHovered ? 12 : 8;
                        const innerRadius = outerRadius / 2;
                        
                        if (i === 0) {
                            ctx.moveTo(
                                pos.x + Math.cos(angle) * outerRadius,
                                pos.y + Math.sin(angle) * outerRadius
                            );
                        } else {
                            ctx.lineTo(
                                pos.x + Math.cos(angle) * outerRadius,
                                pos.y + Math.sin(angle) * outerRadius
                            );
                        }
                        ctx.lineTo(
                            pos.x + Math.cos(innerAngle) * innerRadius,
                            pos.y + Math.sin(innerAngle) * innerRadius
                        );
                    }
                    ctx.closePath();
                    ctx.fillStyle = 'rgba(201, 169, 97, 0.9)';
                    ctx.fill();
                    
                    ctx.shadowBlur = 0;

                    if (isHovered) {
                        ctx.font = '14px JetBrains Mono';
                        ctx.fillStyle = 'rgba(250, 248, 246, 0.9)';
                        ctx.textAlign = 'center';
                        ctx.fillText(concept.label, pos.x, pos.y - 20);
                    }
                });

                if (!state.solved) {
                    requestAnimationFrame(draw);
                }
            }

            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                hoveredConcept = null;
                philosophicalConcepts.forEach(concept => {
                    const pos = getConceptPosition(concept);
                    const dist = Math.sqrt((x - pos.x) ** 2 + (y - pos.y) ** 2);
                    if (dist < 20) {
                        hoveredConcept = concept;
                        canvas.style.cursor = 'pointer';
                    }
                });

                if (!hoveredConcept && !isDragging) {
                    canvas.style.cursor = 'crosshair';
                }
            });

            canvas.addEventListener('mousedown', (e) => {
                if (hoveredConcept) {
                    isDragging = true;
                    dragStart = hoveredConcept;
                }
            });

            canvas.addEventListener('mouseup', (e) => {
                if (isDragging && dragStart && hoveredConcept && hoveredConcept !== dragStart) {
                    if (dragStart.connections.includes(hoveredConcept.id)) {
                        const existing = state.connections.find(
                            c => (c.from === dragStart && c.to === hoveredConcept) ||
                                 (c.from === hoveredConcept && c.to === dragStart)
                        );
                        
                        if (!existing) {
                            state.connections.push({
                                from: dragStart,
                                to: hoveredConcept
                            });
                            
                            info.innerHTML = `<p>✨ Connected ${dragStart.label} and ${hoveredConcept.label}!</p>`;
                            
                            if (state.connections.length >= 5) {
                                solvePuzzle();
                            }
                        }
                    }
                }
                isDragging = false;
                dragStart = null;
            });

            function solvePuzzle() {
                state.solved = true;
                info.innerHTML = '<p>✨ The stars align to spell MARIA! ✨</p>';
                
                setTimeout(() => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Create golden background
                    const gradient = ctx.createRadialGradient(
                        canvas.width / 2, canvas.height / 2, 0,
                        canvas.width / 2, canvas.height / 2, canvas.width / 2
                    );
                    gradient.addColorStop(0, 'rgba(201, 169, 97, 0.3)');
                    gradient.addColorStop(1, 'rgba(0, 0, 0, 0.8)');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw MARIA in large, clear letters
                    const letters = ['M', 'A', 'R', 'I', 'A'];
                    const spacing = canvas.width / 6;
                    
                    ctx.font = 'bold 120px Bodoni Moda';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    
                    letters.forEach((letter, i) => {
                        const x = spacing * (i + 1);
                        const y = canvas.height / 2;
                        
                        // Create glowing effect
                        ctx.shadowBlur = 30;
                        ctx.shadowColor = 'rgba(201, 169, 97, 1)';
                        
                        // Multiple passes for stronger glow
                        for (let j = 0; j < 3; j++) {
                            ctx.fillStyle = 'rgba(201, 169, 97, 0.3)';
                            ctx.fillText(letter, x, y);
                        }
                        
                        // Final letter
                        ctx.shadowBlur = 10;
                        ctx.fillStyle = '#c9a961';
                        ctx.fillText(letter, x, y);
                        
                        // Add sparkles around letters
                        for (let s = 0; s < 5; s++) {
                            const angle = (Math.PI * 2 / 5) * s;
                            const dist = 60;
                            const sx = x + Math.cos(angle) * dist;
                            const sy = y + Math.sin(angle) * dist;
                            
                            ctx.beginPath();
                            ctx.arc(sx, sy, 3 + Math.random() * 2, 0, Math.PI * 2);
                            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                            ctx.fill();
                        }
                    });
                    
                    // Add decorative stars
                    for (let i = 0; i < 50; i++) {
                        ctx.beginPath();
                        ctx.arc(
                            Math.random() * canvas.width,
                            Math.random() * canvas.height,
                            Math.random() * 2,
                            0,
                            Math.PI * 2
                        );
                        ctx.fillStyle = `rgba(201, 169, 97, ${Math.random() * 0.5})`;
                        ctx.fill();
                    }
                }, 1000);
            }

            window.addEventListener('resize', resize);
            resize();
        }

        function initEssayCards() {
            const cards = document.querySelectorAll('.essay-card');
            const modal = document.querySelector('.essay-modal');
            const closeBtn = document.querySelector('.close-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.querySelector('.modal-body');

            const essays = {
                'On Consciousness': '<p>Consciousness is the greatest mystery of existence. It is the mirror that reflects not just the world, but the very act of reflection itself. When we become aware of our awareness, we enter an infinite regress—a hall of mirrors where each reflection contains another observer observing the observation.</p><p>What does it mean to be conscious? Is it merely the firing of neurons, or is there something irreducible about the subjective experience of being? The hard problem of consciousness remains: how does matter give rise to mind?</p>',
                'The Nature of Time': '<p>Time flows not as a river, but as an ocean—vast, deep, and full of currents we barely perceive. We experience it linearly, moment by moment, yet physics tells us all moments exist simultaneously in the block universe.</p><p>Perhaps our perception of time passing is the greatest illusion, a necessary fiction that allows consciousness to navigate an otherwise incomprehensible reality. The present moment is all we ever have, yet it is infinitely elusive.</p>',
                'Beauty\'s Whisper': '<p>In the fleeting moment of aesthetic arrest, we touch something eternal, something that was always there but hidden from ordinary sight. Beauty is not in the object nor in the eye of the beholder, but in the sacred space between.</p><p>When we encounter true beauty, time stops. The chattering mind falls silent. We are reminded of what we knew before we learned to speak, before we learned to think—that we are part of something infinitely precious.</p>',
                'The Gift of Suffering': '<p>Pain carves the vessel in which joy is held. Without darkness, light has no meaning. Without death, life loses its preciousness. This is the paradox at the heart of existence: our greatest gifts come wrapped in our greatest challenges.</p><p>Suffering breaks us open, shatters our illusions, forces us to confront what we would rather avoid. Yet in that breaking, we often find our deepest strength, our most authentic self, our capacity for compassion.</p>',
                'Love as Verb': '<p>Love is not found but forged, not felt but enacted, a daily choice to see the sacred in another. It is not the fairy tale ending but the beginning of the real work—the work of truly seeing and being seen.</p><p>To love is to accept the full catastrophe of another human being, to say yes not just to their light but to their shadow. It is to choose connection over correctness, presence over perfection.</p>',
                'Dancing with Death': '<p>Mortality is the dark backdrop against which life\'s colors shine most brilliantly. Death is not the opposite of life but its most intimate companion, walking beside us always, whispering: "Not yet, but someday. So live, truly live, while you can."</p><p>When we befriend our mortality, we discover an unexpected freedom. The trivial falls away. What matters becomes clear. We learn to hold life lightly, to love fiercely, to forgive quickly.</p>'
            };

            cards.forEach(card => {
                card.addEventListener('click', () => {
                    const title = card.querySelector('.essay-title').textContent;
                    modalTitle.textContent = title;
                    modalBody.innerHTML = essays[title] || '<p>Coming soon...</p>';
                    modal.classList.add('active');
                });
            });

            closeBtn.addEventListener('click', () => modal.classList.remove('active'));
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('active');
            });
        }

        async function initParadoxEngine() {
            const generateBtn = document.getElementById('generate-paradox');
            const outputDiv = document.getElementById('paradox-output');
            const conceptsList = document.getElementById('paradox-concepts-list');
            
            const concepts = ['Love', 'Time', 'Freedom', 'Truth', 'Beauty', 'Death', 'Consciousness', 'Reality', 'Dreams', 'Memory', 'Identity', 'Infinity', 'Knowledge', 'Existence', 'Perception'];
            let currentMode = 'paradox';
            let activeConceptsList = [];

            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    currentMode = e.target.dataset.mode;
                });
            });

            function updateConcepts() {
                const numConcepts = 2 + Math.floor(Math.random() * 3);
                activeConceptsList = [];
                for (let i = 0; i < numConcepts; i++) {
                    let concept;
                    do {
                        concept = concepts[Math.floor(Math.random() * concepts.length)];
                    } while (activeConceptsList.includes(concept));
                    activeConceptsList.push(concept);
                }
                
                conceptsList.innerHTML = activeConceptsList.map(c => 
                    `<span class="concept-tag">${c}</span>`
                ).join('');
            }
            updateConcepts();

            generateBtn.addEventListener('click', async () => {
                generateBtn.disabled = true;
                generateBtn.innerHTML = '<span class="loading"></span>';
                
                // Use fallback templates
                const templates = {
                    paradox: [
                        {
                            title: "The Paradox of {0} and {1}",
                            content: "If {0} requires {1} to exist, and {1} requires {0} to be meaningful, then neither can be the foundation. Yet we experience both daily. This suggests that our understanding of causality itself may be flawed when applied to fundamental aspects of existence.\n\nPerhaps {0} and {1} are not separate entities but different manifestations of something deeper, something our language cannot capture.",
                            questions: ["Can circular dependencies exist in reality?", "Is this a limitation of language or logic?", "What would it mean for something to be self-causing?"]
                        },
                        {
                            title: "The {0} Paradox",
                            content: "The more we pursue {0}, the further it seems to recede. Yet when we abandon the pursuit, {0} often arrives unbidden. This suggests that {0} exists in a state of quantum superposition - both present and absent until the moment of observation collapses it into one state or the other.",
                            questions: ["Is desire the enemy of attainment?", "Can we want without wanting?", "Does {0} exist independently of our perception?"]
                        }
                    ],
                    dilemma: [{
                        title: "The Dilemma of Choosing Between {0} and {1}",
                        content: "When forced to choose between {0} and {1}, we face an impossible decision. To choose {0} means sacrificing {1}, yet {0} without {1} becomes meaningless. This reveals the interconnected nature of values we often treat as separate.\n\nThe dilemma deepens when we realize that the very act of choosing may destroy both.",
                        questions: ["Is it possible to have one without the other?", "What hidden assumptions make this feel like a dilemma?", "Could refusing to choose be a choice itself?"]
                    }],
                    thought: [{
                        title: "The {0} Machine",
                        content: "Imagine a device that could create perfect {0} but at the cost of genuine {1}. Would using such a device enhance human experience or diminish it? This thought experiment reveals our conflicting intuitions about authenticity and perfection.\n\nIf the experience is indistinguishable from 'real' {0}, does the origin matter?",
                        questions: ["What makes something 'genuine' versus 'artificial'?", "Would perfect simulation be distinguishable from reality?", "Is the process or the outcome more important?"]
                    }],
                    dialogue: [{
                        title: "Socrates and the Nature of {0}",
                        content: "Socrates: 'Tell me, friend, what is {0}?'\nStudent: 'It is obviously connected to {1}.'\nSocrates: 'But can {1} exist without {0}?'\nStudent: 'I... I'm not certain anymore.'\nSocrates: 'Then perhaps we don't understand either as well as we thought.'\nStudent: 'But surely we experience {0} every day!'\nSocrates: 'Do we experience {0}, or do we experience our idea of {0}?'",
                        questions: ["What assumptions did the student make?", "How does questioning reveal ignorance?", "Can we ever truly know {0}?"]
                    }]
                };
                
                const templateList = templates[currentMode];
                const template = templateList[Math.floor(Math.random() * templateList.length)];
                
                let title = template.title;
                let content = template.content;
                
                title = title.replace(/\{0\}/g, activeConceptsList[0]);
                title = title.replace(/\{1\}/g, activeConceptsList[1] || activeConceptsList[0]);
                
                content = content.replace(/\{0\}/g, activeConceptsList[0]);
                content = content.replace(/\{1\}/g, activeConceptsList[1] || activeConceptsList[0]);
                
                const questions = template.questions.map(q => {
                    return q.replace(/\{0\}/g, activeConceptsList[0])
                            .replace(/\{1\}/g, activeConceptsList[1] || activeConceptsList[0]);
                });
                
                outputDiv.querySelector('.paradox-title').textContent = title;
                outputDiv.querySelector('.paradox-content').innerHTML = `<p>${content.replace(/\n\n/g, '</p><p>')}</p>`;
                outputDiv.querySelector('.paradox-questions').innerHTML = `
                    <h4>Questions to Ponder</h4>
                    <ul>${questions.map(q => `<li>${q}</li>`).join('')}</ul>
                `;
                outputDiv.classList.remove('hidden');
                
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<span class="paradox-icon">∞</span><span>Generate</span><span class="paradox-icon">∞</span>';
                updateConcepts();
            });
        }

        function initPoetry() {
            const btn = document.getElementById('generate-poem');
            const content = document.getElementById('poem-content');
            
            const poems = [
                'عيناكِ نجمتانِ أضاءتا ليلَ روحي، وأنا تائهٌ في سماءِ جمالِكِ',
                'يا مَن غيابُها يحوّلُ النهارَ إلى ليلٍ، والربيعَ إلى خريفٍ أبديّ',
                'في عينيكِ أرى الكونَ كلَّه، وبدونِكِ لا أرى سوى العدَم',
                'قلبي صحراءٌ وأنتِ المطرُ، روحي ظلامٌ وأنتِ القمرُ',
                'كلُّ نجمةٍ في السماءِ تحسدُ بريقَ عينيكِ يا ماريا',
                'أموتُ ألفَ مرةٍ حين تغيبينَ، وأحيا بنظرةٍ واحدةٍ منكِ',
                'شَعرُكِ ليلٌ أتمنى أن أضيعَ فيه، وابتسامتُكِ فجرٌ أحلمُ به',
                'يا من جمالُها يُخجِلُ القمرَ، ويجعلُ الوردَ يذبُلُ خجلاً',
                'بدونِكِ أنا مجنونٌ بلا ليلى، قيسٌ بلا صحراءَ يهيمُ فيها',
                'عطرُكِ يسكنُ أنفاسي، وصوتُكِ يرقصُ في أحلامي',
                'أكتبُ اسمَكِ على كلِّ نجمةٍ، علّها تضيءُ طريقَكِ إليَّ',
                'في غيابِكِ أعدُّ الثواني كأنها قرونٌ، وفي حضورِكِ تمرُّ السنواتُ كلحظةٍ',
                'ضحكتُكِ موسيقى تشفي جراحَ الروحِ، ودمعتُكِ تحرقُ قلبي',
                'أنتِ القصيدةُ التي عجزَ كلُّ الشعراءِ عن كتابتِها',
                'لو كانَ جمالُكِ بحراً لغرقَ فيه كلُّ العاشقينَ'
            ];
            
            btn.addEventListener('click', () => {
                const poem = poems[Math.floor(Math.random() * poems.length)];
                content.style.opacity = '0';
                setTimeout(() => {
                    content.textContent = poem;
                    content.style.opacity = '1';
                }, 300);
            });
        }

        function initFloatingParticles() {
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.cssText = `width:${Math.random()*4+1}px;height:${Math.random()*4+1}px;background:var(--accent-gold);left:${Math.random()*window.innerWidth}px;animation-duration:${Math.random()*20+20}s;animation-delay:${Math.random()*20}s`;
                document.body.appendChild(particle);
            }
        }
        </script>
    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script type="module" src="./js/player.js"></script>
</body>
</html>
